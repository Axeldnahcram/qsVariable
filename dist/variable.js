define("extensions/variable/util",[],function(){"use strict";function e(e,t,l){var a=document.createElement(e);return t&&(a.className=t),void 0!==l&&(a.innerHTML=l),a}function t(e,t){0===e.childNodes.length?e.appendChild(t):e.replaceChild(t,e.childNodes[0])}function l(t){var l=e("link");l.rel="stylesheet",l.type="text/css",l.href=require.toUrl(t),document.head.appendChild(l)}return{createElement:e,setChild:t,addStyleSheet:l}}),define("extensions/variable/properties",[],function(){"use strict";return{initialProperties:{variableValue:{},variableName:"",render:"f",valueType:"x",alternatives:[],dynamicvalues:"",min:0,max:100,step:1,style:"qlik",width:"",customwidth:""},definition:{type:"items",component:"accordion",items:{settings:{uses:"settings",items:{variable:{type:"items",label:"Variable",items:{name:{ref:"variableName",label:"Name",type:"string",component:"dropdown",options:function(e,t,l){return console.log("options",e,t,l),l.model.enigmaModel.app.getVariableList().then(function(e){return console.log("variableList",e),e.map(function(e){return{value:e.qName,label:e.qName}})})},change:function(e){e.variableValue=e.variableValue||{},e.variableValue.qStringExpression='="'+e.variableName+'"'}},render:{type:"string",component:"dropdown",label:"Show as",ref:"render",options:[{value:"b",label:"Buttons"},{value:"s",label:"Drop down"},{value:"f",label:"Input Field"},{value:"l",label:"Slider"}],defaultValue:"f"},style:{type:"string",component:"dropdown",label:"Style",ref:"style",options:[{value:"qlik",label:"Qlik"},{value:"bootstrap",label:"Bootstrap"},{value:"material",label:"Material"}]},width:{type:"string",component:"dropdown",label:"Width",ref:"width",options:[{value:"",label:"Default"},{value:"fill",label:"Fill"},{value:"custom",label:"Custom"}]},customwidth:{type:"string",ref:"customwidth",label:"Custom width",expression:"optional",show:function(e){return"custom"===e.width}},vert:{type:"boolean",label:"Vertical",ref:"vert",defaultValue:!1,show:function(e){return"l"===e.render}}}},values:{type:"items",label:"Values",show:function(e){return"f"!=e.render},items:{valueType:{type:"string",component:"dropdown",label:"Fixed or dynamic values",ref:"valueType",options:[{value:"x",label:"Fixed"},{value:"d",label:"Dynamic"}],defaultValue:"x",show:function(e){return["b","s"].indexOf(e.render)>-1}},dynamicvalues:{type:"string",ref:"dynamicvalues",label:"Dynamic values",expression:"optional",show:function(e){return["b","s"].indexOf(e.render)>-1&&"d"===e.valueType}},dynamictext:{component:"text",label:"Use | to separate values and ~ to separate value and label, like this: value1|value2 or value1~label1|value2~label2)",show:function(e){return["b","s"].indexOf(e.render)>-1&&"d"===e.valueType}},alternatives:{type:"array",ref:"alternatives",label:"Alternatives",itemTitleRef:"label",allowAdd:!0,allowRemove:!0,addTranslation:"Add Alternative",items:{value:{type:"string",ref:"value",label:"Value",expression:"optional"},label:{type:"string",ref:"label",label:"Label",expression:"optional"}},show:function(e){return["b","s"].indexOf(e.render)>-1&&"d"!==e.valueType}},min:{ref:"min",label:"Min",type:"number",defaultValue:0,expression:"optional",show:function(e){return"l"===e.render}},max:{ref:"max",label:"Max",type:"number",defaultValue:100,expression:"optional",show:function(e){return"l"===e.render}},step:{ref:"step",label:"Step",type:"number",defaultValue:1,expression:"optional",show:function(e){return"l"===e.render}},rangelabel:{ref:"rangelabel",label:"Slider label",type:"boolean",defaultValue:!1,show:function(e){return"l"===e.render}}}}}}}},support:{export:!0}}}),define(["./util","./properties"],function(e,t){"use strict";function l(e){return 100*(e.value-e.min)/(e.max-e.min)}function a(e,t,l){return e.backendApi.model.enigmaModel.app.getVariableByName(t).then(function(e){return e.setStringValue(l)})}function n(e,t,l){switch(e){case"material":case"bootstrap":if(l)return"selected";break;default:switch(t){case"button":return l?"qui-button-selected lui-button lui-button--success":"qui-button lui-button";case"select":return"qui-select lui-select";case"input":return"qui-input lui-input"}}}function i(e){return"l"===e.render?"98%":"custom"===e.width?e.customwidth:"fill"===e.width?"b"!==e.render?"100%":"calc( "+100/e.alternatives.length+"% - 3px)":void 0}function r(e,t){e.label?(t?e.label.style.bottom=l(e)+"%":e.label.style.left=l(e)+"%",e.label.textContent=e.value):e.title=e.value}function u(e){return e.split("|").map(function(e){var t=e.split("~");return{value:t[0],label:t.length>1?t[1]:t[0]}})}return e.addStyleSheet("extensions/variable/variable.css"),{initialProperties:t.initialProperties,definition:t.definition,support:t.support,paint:function(t,l){var o=e.createElement("div",l.style||"qlik"),s=i(l),d="d"===l.valueType?u(l.dynamicvalues):l.alternatives,p=this;if(l.vert&&o.classList.add("vert"),"b"===l.render)d.forEach(function(t){var i=e.createElement("button",n(l.style,"button",t.value===l.variableValue),t.label);i.onclick=function(){a(p,l.variableName,t.value)},i.style.width=s,o.appendChild(i)});else if("s"===l.render){var c=e.createElement("select",n(l.style,"select"));c.style.width=s,d.forEach(function(t){var a=e.createElement("option",void 0,t.label);a.value=t.value,a.selected=t.value===l.variableValue,c.appendChild(a)}),c.onchange=function(){a(p,l.variableName,this.value)},o.appendChild(c)}else if("l"===l.render){var b=e.createElement("input");if(l.vert?(b.style.width=t.height()+"px",b.style.left="-"+(t.height()-t.width())/2+"px"):b.style.width=s,b.type="range",b.min=l.min||0,b.max=l.max||100,b.step=l.step||1,b.value=l.variableValue,b.onchange=function(){r(this,l.vert),a(p,l.variableName,this.value)},b.oninput=function(){r(this,l.vert)},o.appendChild(b),l.rangelabel){var v=e.createElement("div","labelwrap");b.label=e.createElement("div","rangelabel",l.variableValue),v.appendChild(b.label),o.appendChild(v)}r(b,l.vert)}else{var f=e.createElement("input",n(l.style,"input"));f.style.width=s,f.type="text",f.value=l.variableValue,f.onchange=function(){a(p,l.variableName,this.value)},o.appendChild(f)}e.setChild(t[0],o)}}});